import{_ as a,F as n,W as i,X as t,Y as d,Z as e,a0 as c,$ as s}from"./framework-c1077caf.js";const l="/assets/uboot_set_network-2179364d.png",r={},u=s(`<h1 id="网络配置" tabindex="-1"><a class="header-anchor" href="#网络配置" aria-hidden="true">#</a> 网络配置</h1><blockquote><p>自己的电脑IP设置为<code>10.10.10.10</code>，子网掩码<code>255.0.0.0</code>；</p></blockquote><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>//设置ip地址
$ setenv ipaddr 10.10.10.11 
//设置tftp服务端ip地址(pc端地址)
$ setenv serverip 10.10.10.10
//查看当前设置,如下图所示
$ pri
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+l+`" alt="uboot_set_network" tabindex="0"><figcaption>uboot_set_network</figcaption></figure><h1 id="通过tftp加载vmlinux" tabindex="-1"><a class="header-anchor" href="#通过tftp加载vmlinux" aria-hidden="true">#</a> 通过tftp加载vmlinux</h1><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>tftp vmlinux
bootelf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="创建uimage" tabindex="-1"><a class="header-anchor" href="#创建uimage" aria-hidden="true">#</a> 创建uImage</h1><p><code>vmlinux</code>是非压缩格式的镜像（<code>zImage</code>是压缩格式的），我们需要使用<code>u-boot</code>提供的<code>mkimage</code>工具，给<code>vmlinux</code>添加一些头，让<code>u-boot</code>能够识别。</p><p>首先安装<code>uboot-tools</code>工具（以<code>pacman</code>包管理器为例）：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>sudo pacman -S uboot-tools
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>然后，使用<code>mkimage</code>制作<code>uImage</code>：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>mkimage -A mips -O linux -T kernel -C none -a 0x800fffc0 -e 0x80100000 -n &#39;Linux-6.3&#39; -d /home/geng/Item/linux/vmlinux uImage
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>其中，<code>-A</code> 指定CPU的体系结构、<code>-O</code> 指定操作系统类型、<code>-T</code> 指定映象类型、<code>-C</code> 指定映象压缩方式、<code>-a</code> 指定映象在内存中的加载地址、<code>-e</code> 指定映象运行的入口点地址，这个地址就是<code>-a</code>参数指定的值加上<code>0x40</code>（因为前面有个mkimage添加的0x40个字节的头）、<code>-n</code> 指定映象名、<code>-d</code> 指定制作映象的源文件、最后跟上一个最终生成的目标文件名。</p>`,13),m=d("code",null,"mkimage",-1),v={href:"https://blog.csdn.net/qq_44045338/article/details/109345192",target:"_blank",rel:"noopener noreferrer"};function p(g,x){const o=n("ExternalLinkIcon");return i(),t("div",null,[u,d("p",null,[e("关于"),m,e("命令的更多内容，可参考："),d("a",v,[e("mkimage安装及其使用方法_XiaoCheng'Blog的博客-CSDN博客"),c(o)])])])}const h=a(r,[["render",p],["__file","u-boot.html.vue"]]);export{h as default};
